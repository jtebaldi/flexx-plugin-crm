<% case params[:refresh_panel] %>
  <% when 'contact-detail' %>
    $('#contact-open-tasks-panel').html('<%= escape_javascript(render partial: 'plugins/flexx_plugin_crm/contacts/open_tasks', locals: { refresh_panel: 'view-contact-tasks-panels' }) %>');
    $('#contact-timeline-panel').html('<%= escape_javascript(render partial: 'plugins/flexx_plugin_crm/contacts/timeline') %>');
  <% when 'tasks-dashboard' %>
    $('#todays-tasks-list').html('<%= escape_javascript(render partial: 'plugins/flexx_plugin_crm/tasks/tasks_list', locals: { tasks: @todays_tasks, refresh_panel: 'tasks-dashboard' }) %>');
    $('#upcoming-tasks-list').html('<%= escape_javascript(render partial: 'plugins/flexx_plugin_crm/tasks/tasks_list', locals: { tasks: @upcoming_tasks, refresh_panel: 'tasks-dashboard' }) %>');
    $('#old-pending-tasks-list').html('<%= escape_javascript(render partial: 'plugins/flexx_plugin_crm/tasks/tasks_list', locals: { tasks: @old_pending_tasks, refresh_panel: 'tasks-dashboard' }) %>');
<% end %>

$('#modal-defer-task').modal('hide');
